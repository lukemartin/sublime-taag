# -*- coding: utf-8 -*-
import sublime, sublime_plugin, re

class TaagCommand(sublime_plugin.TextCommand):
    chars = {
        'A': u""" █████╗ \n██╔══██╗\n███████║\n██╔══██║\n██║  ██║\n╚═╝  ╚═╝""",
        'B': u"""██████╗ \n██╔══██╗\n██████╔╝\n██╔══██╗\n██████╔╝\n╚═════╝ """,
        'C': u""" ██████╗\n██╔════╝\n██║     \n██║     \n╚██████╗\n ╚═════╝""",
        'D': u"""██████╗ \n██╔══██╗\n██║  ██║\n██║  ██║\n██████╔╝\n╚═════╝ """,
        'E': u"""███████╗\n██╔════╝\n█████╗  \n██╔══╝  \n███████╗\n╚══════╝""",
        'F': u"""███████╗\n██╔════╝\n█████╗  \n██╔══╝  \n██║     \n╚═╝     """,
        'G': u""" ██████╗ \n██╔════╝ \n██║  ███╗\n██║   ██║\n╚██████╔╝\n ╚═════╝ """,
        'H': u"""██╗  ██╗\n██║  ██║\n███████║\n██╔══██║\n██║  ██║\n╚═╝  ╚═╝""",
        'I': u"""██╗\n██║\n██║\n██║\n██║\n╚═╝""",
        'J': u"""     ██╗\n     ██║\n     ██║\n██   ██║\n╚█████╔╝\n ╚════╝ """,
        'K': u"""██╗  ██╗\n██║ ██╔╝\n█████╔╝ \n██╔═██╗ \n██║  ██╗\n╚═╝  ╚═╝""",
        'L': u"""██╗     \n██║     \n██║     \n██║     \n███████╗\n╚══════╝""",
        'M': u"""███╗   ███╗\n████╗ ████║\n██╔████╔██║\n██║╚██╔╝██║\n██║ ╚═╝ ██║\n╚═╝     ╚═╝""",
        'N': u"""███╗   ██╗\n████╗  ██║\n██╔██╗ ██║\n██║╚██╗██║\n██║ ╚████║\n╚═╝  ╚═══╝""",
        'O': u""" ██████╗ \n██╔═══██╗\n██║   ██║\n██║   ██║\n╚██████╔╝\n ╚═════╝ """,
        'P': u"""██████╗ \n██╔══██╗\n██████╔╝\n██╔═══╝ \n██║     \n╚═╝     """,
        'Q': u""" ██████╗ \n██╔═══██╗\n██║   ██║\n██║▄▄ ██║\n╚██████╔╝\n ╚══▀▀═╝ """,
        'R': u"""██████╗ \n██╔══██╗\n██████╔╝\n██╔══██╗\n██║  ██║\n╚═╝  ╚═╝""",
        'S': u"""███████╗\n██╔════╝\n███████╗\n╚════██║\n███████║\n╚══════╝""",
        'T': u"""████████╗\n╚══██╔══╝\n   ██║   \n   ██║   \n   ██║   \n   ╚═╝   """,
        'U': u"""██╗   ██╗\n██║   ██║\n██║   ██║\n██║   ██║\n╚██████╔╝\n ╚═════╝ """,
        'V': u"""██╗   ██╗\n██║   ██║\n██║   ██║\n╚██╗ ██╔╝\n ╚████╔╝ \n  ╚═══╝  """,
        'W': u"""██╗    ██╗\n██║    ██║\n██║ █╗ ██║\n██║███╗██║\n╚███╔███╔╝\n ╚══╝╚══╝ """,
        'X': u"""██╗  ██╗\n╚██╗██╔╝\n ╚███╔╝ \n ██╔██╗ \n██╔╝ ██╗\n╚═╝  ╚═╝""",
        'Y': u"""██╗   ██╗\n╚██╗ ██╔╝\n ╚████╔╝ \n  ╚██╔╝  \n   ██║   \n   ╚═╝   """,
        'Z': u"""███████╗\n╚══███╔╝\n  ███╔╝ \n ███╔╝  \n███████╗\n╚══════╝""",
        '0': u""" ██████╗ \n██╔═████╗\n██║██╔██║\n████╔╝██║\n╚██████╔╝\n ╚═════╝ """,
        '1': u""" ██╗\n███║\n╚██║\n ██║\n ██║\n ╚═╝""",
        '2': u"""██████╗ \n╚════██╗\n █████╔╝\n██╔═══╝ \n███████╗\n╚══════╝""",
        '3': u"""██████╗ \n╚════██╗\n █████╔╝\n ╚═══██╗\n██████╔╝\n╚═════╝ """,
        '4': u"""██╗  ██╗\n██║  ██║\n███████║\n╚════██║\n     ██║\n     ╚═╝""",
        '5': u"""███████╗\n██╔════╝\n███████╗\n╚════██║\n███████║\n╚══════╝""",
        '6': u""" ██████╗ \n██╔════╝ \n███████╗ \n██╔═══██╗\n╚██████╔╝\n ╚═════╝ """,
        '7': u"""███████╗\n╚════██║\n    ██╔╝\n   ██╔╝ \n   ██║  \n   ╚═╝  """,
        '8': u""" █████╗ \n██╔══██╗\n╚█████╔╝\n██╔══██╗\n╚█████╔╝\n ╚════╝ """,
        '9': u""" █████╗ \n██╔══██╗\n╚██████║\n ╚═══██║\n █████╔╝\n ╚════╝ """,
        '-': u"""      \n      \n█████╗\n╚════╝\n      \n      """,
        '_': u"""        \n        \n        \n        \n███████╗\n╚══════╝""",
        ' ': u"""    \n    \n    \n    \n    \n    """,
        '*': u"""      \n▄ ██╗▄\n ████╗\n▀╚██╔▀\n  ╚═╝ \n      """,
        ':': u"""   \n██╗\n╚═╝\n██╗\n╚═╝\n   """,
        '/': u"""    ██╗\n   ██╔╝\n  ██╔╝ \n ██╔╝  \n██╔╝   \n╚═╝    """
    }
    wrap = {
        'js': ['// ', ''],
        'css': ['/* ', '*/']
    }

    def run(self, edit):
        self.edit = edit
        self.region = self.view.sel()[0]
        self.on_done(self.view.substr(self.region))

    def on_done(self, user_input):
        text = ''
        scope = self.view.scope_name(self.view.sel()[0].end())
        res = re.search('\\bsource\\.([a-z+\-]+)', scope)
        context = res.group(1) if res else 'js'
        print res
        for x in range(0, 5):
            text = text + self.wrap[context][0]
            for c in user_input.upper():
                text = text + self.chars[c].split('\n')[x] + ' '
            text = text + self.wrap[context][1] + '\n'
        self.view.replace(self.edit, self.region, text)